# 什么是JNI

**JavaNativeInterface**，java本地接口，是java和本地语言交互的接口。是属于java的，和android架构没多大关系。

由于java虚拟机的跨平台能力，一个虚拟机，对应多个平台的本地语言。所以java和本地语言的交互能力很弱，需要借助JNI.

实际中的驱动很多都是c 、c++写的，java可以通过jni和c 、c++进行调用，从而扩展java语言的能力。其他，还有高效的数学运算，游戏实时渲染，音视频编解码，也用c c++开发的。

# 考点

写一个JNI调用的步骤：

1. 在java层声明native方法
2. 编译该方法所在java文件，生成.class文件
3. 使用javah命令生成.h文件
4. 使用本地代码实现.h中声明的native方法
5. 编译.so库
6. 把so库放到java程序中



# 什么是NDK

NativeDevelopKit 本地开发工具包。它是一个软件开发包。NDK是Android中实现JNI，java本地化调用的手段。ndk提供一些关键的工具，比如交叉编译。




# 考点2

c c++ 编译过程

1. 预处理

   把include导入，define宏定义，都替换成实际的代码。

2. 编译

   检查代码规范性，无误的话，把源代码编译成汇编语言.s

3. 汇编

   把.s文件，翻译成二进制文件.o

4. 链接

   当前代码如果引用到了其他函数库，在使用之前就要先进行链接，如果链接不到，就会报错。

编译的结果分为：**动态库.so** / **静态库.a**

动态库，把链接阶段推迟到运行时，动态地去链接当前的函数库。

静态库，在编译时期，就完成链接动作，把牵涉到函数库打包到最终的.a文件中。 .a文件可以不依赖外部函数库，单独运行。

# 交叉编译

在x86平台，可以编译出支持arm平台的库。



